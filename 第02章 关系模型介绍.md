# 第02章 关系模型介绍

---

## 1. 关系数据库的结构

关系数据库由**表**（table）的集合构成，每个表都有唯一的名字。

在关系模型的术语中，**关系**（relation）用来指代表，**元组**（tuple）用来指代表中的行，**属性**（attribute）指代表中的列。

例如，下表中*instructor*关系有四个属性：*ID*、*name*、*dept_name*和*salary*。

[instructor关系](https://www.notion.so/5b40e91800764833a01de0155604e557)

用**关系实例**（relation instance）这个术语来表示一个关系的特定实例，也就是所包含的一组特定的行。上表中*instructor*的实例有12个元组，对应12个教师。

对于关系的每个属性，都存在一个允许取值的集合，称为该属性的**域**（domain）。这样*instructor*关系的*salary*属性的域就是所有可能的工资值的集合，而*name*属性的域是所有可能的教师名字的集合。

如果域中元素被看作是不可再分的单元，则域是**原子的**（atomic）。我们要求对所有关系*r*的所有属性的域都是原子的。

![图1](https://img-blog.csdnimg.cn/2021042921534036.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L0ZsYW5kMjI=,size_16,color_FFFFFF,t_70#pic_center)
如图所示，$D_1=\{d_{11},d_{12},...\}$

**笛卡尔积**为：$D_1×D_2×D_3×...$

关系模式是笛卡尔积的*子集*。

**元组变量**：设一个$t$指代*其中一个*元组。则$t[A_1]=d_{12}，t[A_2]=d_{22}$。

由于关系是元组集合，元组在关系中出现的顺序是无关紧要的，所以关系是*无序*的。

**数据库模式**（database schema）和**数据库实例**（database instance）的区别：前者是数据库的逻辑设计，后者是给定时刻数据库中数据的一个快照。

---

## 2. 码

- **超码**（superkey）：一个或多个属性的集合，这些属性的组合可以*唯一*标识一个元组。
- **候选码**（candidate key）：*最小*超码。它的任意真子集都不能成为超码。
- **主码**（primary key）：代表被数据库设计者选中的、主要用来在一个关系中区分不同元组的**候选码**。
- **外码**（foreign key）：一个关系模式的属性中可能包括*另一个*关系模式的**主码**，这个属性在前一个关系模式上称作参照后一个关系模式的外码。前者也被称作外码依赖的**参照关系**（referencing relation），后者叫做外码的**被参照关系**（referenced relation）。

---

## 3. 模式图

一个含有主码和外码依赖的数据库模式可以用**模式图**（schema diagram）来表示。

- *classroom*(*building*, *room_number*, *capacity*)
- *department*(*dept_name*, *building*, *budget*)
- *course*(*course_id*, *title*, *dept_name*, *credits*)
- *instructor*(*ID*, *name*, *dept_name*, *salary*)
- *section*(*course_id*, *sec_id*, *semester*, *year*, *building*, *room_number*, *time_slot_id*)
- *teaches*(*ID*, *course_id*, *sec_id*, *semester*, *year*)
- *student*(*ID*, *name*, *dept_name*, *tot_cred*)
- *takes*(*ID*, *course_id*, *sec_id*, *semester*, *year*, *grade*)
- *advisor*(*s_ID*, *i_ID*)
- *time_slot*(*time_slot_id*, *day*, *start_time*, *end_time*)
- *prereq*(*course_id*, *prereq_id*)

如图所示，外码依赖用从参照关系的外码属性到被参照关系的主码属性之间的箭头表示：

![%E7%AC%AC02%E7%AB%A0%20%E5%85%B3%E7%B3%BB%E6%A8%A1%E5%9E%8B%E4%BB%8B%E7%BB%8D%20801fdc023b614427ba5a68f7f40a94f4.png](%E7%AC%AC02%E7%AB%A0%20%E5%85%B3%E7%B3%BB%E6%A8%A1%E5%9E%8B%E4%BB%8B%E7%BB%8D%20801fdc023b614427ba5a68f7f40a94f4.png)

---

## 4. 关系查询语言

**查询语言**（query language）是用户用来从数据库中请求获取信息的语言。可分为两种：

- **过程化语言**（procedural language）：用户指导系统执行一系列操作以计算出结果。
- **非过程化语言**（nonprocedural language）：用户只需描述所需信息，不用给出获取信息的具体过程。

实际使用的查询语言既包含过程化的成分，又包含非过程化的成分。

---

## 5. 关系运算

[第06章 形式化关系查询语言](https://www.notion.so/06-42480104093b427e96d30dbb97246cdd)
